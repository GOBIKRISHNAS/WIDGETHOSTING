var ZSDKUtil=function(e){function t(){}function r(){return s&&s instanceof t||(s=new t),s}function i(e){var t={},r=e||window.location.href;return r.substr(r.indexOf("?")+1).split("&").forEach(function(e){var r=e.split("=");t[r[0]]=r[1]}),t.hasOwnProperty("serviceOrigin")&&(t.serviceOrigin=decodeURIComponent(t.serviceOrigin)),t}function n(){return a&&a.isDevMode}function o(){return a&&a.isLogEnabled}var s,a=i();return t.prototype.Info=function(){(e.isDevMode()||e.isLogEnabled())&&console.info.apply(console,arguments)},t.prototype.Error=console.error,e.GetQueryParams=i,e.isDevMode=n,e.isLogEnabled=o,e.getLogger=r,e}(window.ZSDKUtil||{}),ZSDKMessageManager=function(e){function t(e){g=e,window.addEventListener("message",i),window.addEventListener("unload",f)}function r(e){var t=e.source,r=e.origin;return!(!g.isRegistered()||y!==t||m!==r)||new Error("Un-Authorized Message.")}function i(e){var t;try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(r){t=e.data}var i=t.type;try{if("__REGISTER__"===i||r(e))switch(i){case"__REGISTER__":n(e,t);break;case"__EVENT_RESPONSE__":c(e,t);break;default:o(e,t)}}catch(e){T.Error("[SDK.MessageHandler] => ",e.stack)}}function n(e,t){y=window.parent,m=h.serviceOrigin;var r=window.location.origin;g.dcType=r.split(".").pop().toUpperCase(),"COM"===g.dcType&&(g.dcType="US"),g.key=t.uniqueID,g.parentWindow=y,g._isRegistered=!0,p({type:"__REGISTER__",widgetOrigin:I(),uniqueID:g.key},g);var i=t.data;a(g,"Load",i)}function o(e,t){var r,i=t.widgetID,n=t.eventName;if(g.key===i)r=a(g,n,t.data);else{var o=g._childWidgets[i];o&&(r=a(o,n,t.data))}if(t.isPromise){var c={};Promise.all(r).then(function(e){c.response=e,c.widgetID=i,c.sourceWidgetID=g.key,s(t,c)}).catch(function(e){c.response=e,c.widgetID=i,c.sourceWidgetID=g.key,s(t,c)})}}function s(e,t){p({type:"__EVENT_RESPONSE__",widgetOrigin:I(),uniqueID:g.key,eventName:e.eventName,data:t,promiseID:e.promiseID},g)}function a(e,t,r){var i=e.eventHandlers[t],n=[];if(Array.isArray(i))for(var o=0;o<i.length;o++){var s,a;try{s=i[o].call(e,r),a=s instanceof Promise?s.then(function(e){return{isSuccess:!0,response:e}}).catch(function(e){return{isSuccess:!1,response:e}}):{isSuccess:!0,response:s}}catch(e){a={isSuccess:!1,response:e}}n.push(a)}return n}function c(e,t){var r=t.promiseID,i=t.data,n=t.isSuccess;N.hasOwnProperty(r)&&(n?N[r].resolve(i):N[r].reject(i),N[r]=void 0,delete N[r])}function p(e,t){var r,i=e.isPromise;if(i&&(r=u(),e.promiseID=r),t&&(e.uniqueID=(t.parentWidget||t).key,e.widgetID=t.key),e.time=(new Date).getTime(),E(e),i)return d(r)}function u(){return"Promise"+v++}function d(e){return new Promise(function(t,r){N[e]={resolve:t,reject:r,time:(new Date).getTime()}})}function f(){E({type:"__DEREGISTER__",uniqueID:g.key})}function E(e){if("object"==typeof e&&(e.widgetOrigin=encodeURIComponent(I())),!y)throw new Error("Parentwindow reference not found.");y.postMessage(e,h.serviceOrigin)}function I(){return window.location.protocol+"//"+window.location.host+window.location.pathname}var g,y,m,T=ZSDKUtil.getLogger(),v=100,N={},h=ZSDKUtil.GetQueryParams();return e.Init=t,e.SendEvent=p,e}(window.ZSDKMessageManager||{});window.ZSDK=function(){function e(e){this.serviceOrigin=e.serviceOrigin||r.serviceOrigin,this.parentWidget=e.parentWidget,this.key=e.key,this._isRegistered=!1,this._childWidgets={},this.eventHandlers=Object.create(null),this.meta}var t,r=ZSDKUtil.GetQueryParams();return e.prototype.on=function(e,t){if("string"!=typeof e)throw new Error("Invalid eventname parameter passed.");if("function"!=typeof t)throw new Error("Invalid function parameter passed.");var r=this.eventHandlers[e];if(Array.isArray(r)||(this.eventHandlers[e]=r=[]),r.push(t),"Load"!==e){var i={type:"__EVENT_BIND__",eventName:e,count:r.length};this.parentWidget&&!this.parentWidget.isRegistered()||!this.parentWidget&&!this.isRegistered()?(this.parentWidget||this).on("Load",function(){ZSDKMessageManager.SendEvent(i,this)}):ZSDKMessageManager.SendEvent(i,this)}},e.prototype.off=function(e,t){if("string"!=typeof e)throw new Error("Invalid eventname parameter passed.");if("function"!=typeof t)throw new Error("Invalid function parameter passed.");var r=this.eventHandlers[e];if(Array.isArray(r)){var i,n=[];for(i=0;i<r.length;i++)r[i]===t&&n.push(i);for(;n.length;)r.splice(n.pop(),1)}},e.prototype._sendEvent=function(e,t,r){var i={type:"__EVENT__",eventName:e,data:t,isPromise:r};return ZSDKMessageManager.SendEvent(i,this)},e.prototype.emit=function(e,t){var r={type:"__EMIT__",eventName:e,data:t};ZSDKMessageManager.SendEvent(r,this)},e.prototype.isRegistered=function(){return this._isRegistered},e.prototype.fetch=function(e){var t={eventName:"__HTTP__",isPromise:!0,options:e};return ZSDKMessageManager.SendEvent(t,this)},e.prototype.createInstance=function(e){var t={eventName:"__CREATE_INSTANCE__",isPromise:!0,options:e};return ZSDKMessageManager.SendEvent(t,this)},e.prototype.modal=function(e){return"object"==typeof e&&(e.location="__MODAL__"),this.createInstance(e)},e.prototype.getWidgets=function(){var e={eventName:"__WIDGETS_INFO__",isPromise:!0};return ZSDKMessageManager.SendEvent(e,this)},e.prototype.getWidgetInstance=function(t){if("string"!=typeof t)throw new Error("Invalid WidgetID passed");if(this.parentWidget)return this.parentWidget.getWidgetInstance(t);var r=this._childWidgets[t];return r||(this._childWidgets[t]=r=new e({key:t,parentWidget:this})),r},e.prototype.getFileObject=function(e){return new File([e.slice(0,e.size)],e.name,{type:e.type})},{Init:function(){return t||(t=new e({serviceOrigin:r.serviceOrigin}),ZSDKMessageManager.Init(t),t)},_getRootInstance:function(){return t}}}(),window.SigmaSDK=function(){function e(e){this._serviceName=e}var t,r={LOAD:"Load",GET:"get",GET_ALL:"get_all",SET:"set",REMOVE:"remove",REQUEST:"request",EVENT_NAME_PREFIX:"SIGMA_",EVENT_NAME_SUFFIX:"_EVENT",REQUEST_API_CONNECTION:"requestapiconnection"},i={VALIDATION:"VALIDATION_ERROR",APP:"APP_ERROR"},n=function(){if(!t.isRegistered())throw new Error("App not registered.")},o=function(e,i){var n=r.EVENT_NAME_PREFIX+e+r.EVENT_NAME_SUFFIX;return t._sendEvent(n,i,!0)},s=function(e,t){return Promise.reject({type:e,message:t})};e.prototype.isRegistered=function(){return t.isRegistered()},e.prototype.context=function(){return n(),t},e.prototype.createWidget=function(e){return n(),t.createInstance(e)},e.prototype.getWidget=function(e){return t.getWidgetInstance(e)},e.prototype.widgetsMeta=function(){return n(),t.getWidgets()},e.prototype.on=function(e,r){return t.on(e,r)},e.prototype.off=function(e,r){return t.off(e,r)},e.prototype.trigger=function(e,r){return n(),t.emit(e,r)},e.prototype.modal=function(e){return n(),t.modal(e)},e.prototype.fetch=function(e){return n(),t.fetch(e)},e.prototype.get=function(e){if(n(),"string"!=typeof e&&!Array.isArray(e))return s(i.VALIDATION,"The get method accepts String or Array of Strings only.");var t="string"==typeof e?[e]:e;if(t.length<=0)return s(i.VALIDATION,"The get method should not accept empty Array of Strings.");var a={event_type:r.GET,properties:t};return o(this._serviceName,a)},e.prototype.getAll=function(e,t){if(n(),"string"!=typeof e)return s(i.VALIDATION,"The getAll method accepts module_name as String only.");var a={event_type:r.GET_ALL,module_name:e,options:t};return o(this._serviceName,a)},e.prototype.set=function(e,t){if(n(),"string"!=typeof e&&"object"!=typeof e&&Array.isArray(e))return s(i.VALIDATION,"The set method accepts key-value pair or Object of key-value pairs only.");var a;if("string"==typeof e?(a={},a[e]=t):a=e,a.keys.length<=0)return s(i.VALIDATION,"The set method should not accept empty Object.");var c={event_type:r.GET_ALL,properties:a};return o(this._serviceName,c)},e.prototype.remove=function(e){if(n(),"string"!=typeof e&&!Array.isArray(e))return s(i.VALIDATION,"The remove method accepts String or Array of Strings only.");var t="string"==typeof e?[e]:e;if(t.length<=0)return s(i.VALIDATION,"The remove method should not accept empty Array of Strings.");var a={event_type:r.REMOVE,properties:t};return o(this._serviceName,a)},e.prototype.request=function(e){if(n(),!e.url||e.url.trim().length<=0)return s(i.VALIDATION,"The parameter url should not be empty");if("string"!=typeof e.url)return s(i.VALIDATION,"The parameter url should be type of string");if(e.method||(e.method="GET"),e.params&&"object"!=typeof e.params&&Array.isArray(e.params))return s(i.VALIDATION,"The parameter params should be type of object");if(e.headers&&"object"!=typeof e.headers&&Array.isArray(e.headers))return s(i.VALIDATION,"The parameter headers should be type of object");if(e.files){if("object"!=typeof e.files||Array.isArray(e.files))return s(i.VALIDATION,"The parameter files should be type of object");if(Object.keys(e.files).length>5)return s(i.VALIDATION,"You can upload a maximum of 5 files at a time.");for(var a=0;a<e.files.length;a++)e.files[a]=t.getFileObject(e.files[a])}var c={event_type:r.REQUEST,options:e};return o(this._serviceName,c)},e.prototype.requestapiconnection=function(e){if(n(),!e.api_namespace||e.api_namespace.trim().length<=0)return s(i.VALIDATION,"The parameter api_namespace should not be empty");if("string"!=typeof e.api_namespace)return s(i.VALIDATION,"The parameter api_namespace should be type of string");if(!e.url||e.url.trim().length<=0)return s(i.VALIDATION,"The parameter url should not be empty");if("string"!=typeof e.url)return s(i.VALIDATION,"The parameter url should be type of string");if(e.method||(e.method="GET"),e.params&&"object"!=typeof e.params&&Array.isArray(e.params))return s(i.VALIDATION,"The parameter params should be type of object");if(e.headers&&"object"!=typeof e.headers&&Array.isArray(e.headers))return s(i.VALIDATION,"The parameter headers should be type of object");if(e.files){if("object"!=typeof e.files||Array.isArray(e.files))return s(i.VALIDATION,"The parameter files should be type of object");if(Object.keys(e.files).length>5)return s(i.VALIDATION,"You can upload a maximum of 5 files at a time.");for(var a=0;a<e.files.length;a++)e.files[a]=t.getFileObject(e.files[a])}var c={event_type:r.REQUEST_API_CONNECTION,options:e};return o(this._serviceName,c)},e.prototype.dispatch=function(e,t){n();var r={event_type:e,options:t};return o(this._serviceName,r)};var a=function(i){return t=window.ZSDK.Init(),"function"==typeof i&&(t.isRegistered()?i.call():t.on(r.LOAD,i)),new e(this._serviceName)},c={CRM:{_serviceName:"CRM"},DESK:{_serviceName:"DESK"},PROJECTS:{_serviceName:"PROJECTS"},ORCHESTLY:{_serviceName:"ORCHESTLY"},MAIL:{_serviceName:"MAIL"},SHOW:{_serviceName:"SHOW"},SDP:{_serviceName:"SDP"},IOT:{_serviceName:"IOT"},CATALYST:{_serviceName:"CATALYST"},FINANCE:{_serviceName:"FINANCE"},CONNECT:{_serviceName:"CONNECT"},TEAMINBOX:{_serviceName:"TEAMINBOX"},SPRINTS:{_serviceName:"SPRINTS"},BUGTRACKER:{_serviceName:"BUGTRACKER"},CREATOR:{_serviceName:"CREATOR"},PEOPLE:{_serviceName:"PEOPLE"},COMMERCE:{_serviceName:"COMMERCE"},SITES:{_serviceName:"SITES"},RECRUIT:{_serviceName:"RECRUIT"},WORKDRIVE:{_serviceName:"WORKDRIVE"},WRITER:{_serviceName:"WRITER"},INVOICE:{_serviceName:"INVOICE"},INVENTORY:{_serviceName:"INVENTORY"},SUBSCRIPTIONS:{_serviceName:"SUBSCRIPTIONS"},CAMPAIGNS:{_serviceName:"CAMPAIGNS"},CHARMHEALTHEHR:{_serviceName:"CHARMHEALTHEHR"},BIGIN:{_serviceName:"BIGIN"}};return{CRM:{init:a.bind(c.CRM)},DESK:{init:a.bind(c.DESK)},PROJECTS:{init:a.bind(c.PROJECTS)},ORCHESTLY:{init:a.bind(c.ORCHESTLY)},MAIL:{init:a.bind(c.MAIL)},SHOW:{init:a.bind(c.SHOW)},SDP:{init:a.bind(c.SDP)},IOT:{init:a.bind(c.IOT)},CATALYST:{init:a.bind(c.CATALYST)},FINANCE:{init:a.bind(c.FINANCE)},CONNECT:{init:a.bind(c.CONNECT)},TEAMINBOX:{init:a.bind(c.TEAMINBOX)},SPRINTS:{init:a.bind(c.SPRINTS)},BUGTRACKER:{init:a.bind(c.BUGTRACKER)},CREATOR:{init:a.bind(c.CREATOR)},PEOPLE:{init:a.bind(c.PEOPLE)},COMMERCE:{init:a.bind(c.COMMERCE)},SITES:{init:a.bind(c.SITES)},RECRUIT:{init:a.bind(c.RECRUIT)},WORKDRIVE:{init:a.bind(c.WORKDRIVE)},WRITER:{init:a.bind(c.WRITER)},INVOICE:{init:a.bind(c.INVOICE)},INVENTORY:{init:a.bind(c.INVENTORY)},SUBSCRIPTIONS:{init:a.bind(c.SUBSCRIPTIONS)},CAMPAIGNS:{init:a.bind(c.CAMPAIGNS)},CHARMHEALTHEHR:{init:a.bind(c.CHARMHEALTHEHR)},BIGIN:{init:a.bind(c.BIGIN)}}}();